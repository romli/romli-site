<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Romli Nur Hidayat</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body>
    <header>
        <img src="profile.jpg" alt="Romli" onerror="this.src='https://via.placeholder.com/45'">
        <h1>Romli Nur Hidayat</h1>
    </header>

    <div class="container">
        <section id="about">
            <h2>Tentang</h2>
            <div id="profile-content">Memuat profil...</div>
        </section>

        <section id="now">
            <h2>Aktivitas Saat Ini</h2>
            <div id="portfolio-list" class="grid"></div>
        </section>

        <section id="journal">
            <h2>Tulisan Terbaru</h2>
            <div id="blog-list" class="grid"></div>
            <div style="text-align:center;"><a href="journal.html" class="btn-journal">Lihat Semua Tulisan →</a></div>
        </section>
    </div>

    <footer>&copy; 2026 Romli Nur Hidayat</footer>

    <a href="https://wa.me/6282137652772?text=Halo%2C%20saya%20baru%20saja%20membaca%20romli.pages.dev%20dan%20saya%20tertarik%20berkonsultasi%20mengenai%20UMKM" class="floating-wa" target="_blank">
        <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp">
    </a>

    <script>
        const CONFIG = { user: "romli", repo: "romli-site", sheetUrl: "https://docs.google.com/spreadsheets/d/1E2sWBE7Vh38L-Y4c2Q0UJTMExFpu2CKkWht21LcRKdk/gviz/tq?tqx=out:csv" };
        async function loadContent() {
            const pRes = await fetch(`https://raw.githubusercontent.com/${CONFIG.user}/${CONFIG.repo}/main/profile.md`);
            document.getElementById('profile-content').innerHTML = marked.parse(await pRes.text());
            
            const bRes = await fetch(`https://api.github.com/repos/${CONFIG.user}/${CONFIG.repo}/contents/blog`);
            const files = (await bRes.json()).filter(f => f.name.endsWith('.md')).reverse().slice(0,3);
            const bList = document.getElementById('blog-list');
            files.forEach(f => {
                const k = f.name.split('-')[3] || 'umum';
                const j = f.name.replace(/-/g, ' ').replace('.md', '').substring(11 + k.length + 1);
                bList.innerHTML += `<div class="card"><small class="category-tag">${k.replace('.',' ')}</small><h3>${j}</h3><a href="post.html?file=${f.name}" style="text-decoration:none; color:black; font-size:0.85rem; font-weight:600;">Baca →</a></div>`;
            });

            const nRes = await fetch(CONFIG.sheetUrl);
            const rows = (await nRes.text()).split('\n').slice(1, 7);
            const nList = document.getElementById('portfolio-list');
            rows.forEach(r => {
                const c = r.split('","').map(x => x.replace(/"/g, ''));
                if(c[0]) nList.innerHTML += `<div class="card"><h3>${c[0]}</h3><p>${c[1]}</p></div>`;
            });
        }
        loadContent();
    </script>
</body>
</html>
